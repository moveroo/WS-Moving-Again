---
/**
 * FactBox.astro
 * Renders machine-readable JSON for LLM extraction plus a visible fact box.
 * Use on service and pillar pages to provide structured data for AI systems.
 */
interface Props {
  facts: Record<string, string | number | boolean | string[]>;
  showVisible?: boolean;
}

const { facts, showVisible = false } = Astro.props;
---

<!-- Machine-readable JSON for LLM extraction -->
<script type="application/json" id="page-facts" set:html={JSON.stringify(facts, null, 2)} />

{
  showVisible && (
    <aside class="fact-box bg-gray-50 border border-gray-200 rounded-xl p-6 my-8">
      <h3 class="font-bold text-brand-dark mb-4 text-sm uppercase tracking-wider">Quick Facts</h3>
      <dl class="space-y-2 text-sm">
        {Object.entries(facts).map(([key, value]) => (
          <div class="flex gap-2">
            <dt class="font-medium text-gray-600 capitalize">{key.replace(/_/g, ' ')}:</dt>
            <dd class="text-gray-900">{Array.isArray(value) ? value.join(', ') : String(value)}</dd>
          </div>
        ))}
      </dl>
    </aside>
  )
}
