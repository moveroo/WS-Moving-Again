---
/**
 * BrainAnalytics - Astro wrapper for Brain Web Analytics
 * 
 * Usage:
 *   <BrainAnalytics />
 * 
 * Requires environment variables:
 *   PUBLIC_BRAIN_URL - Brain API URL
 *   PUBLIC_BRAIN_KEY - Brain API key
 */

const brainUrl = import.meta.env.PUBLIC_BRAIN_URL || '';
const brainKey = import.meta.env.PUBLIC_BRAIN_KEY || '';
const debug = import.meta.env.DEV;
---

{brainUrl && brainKey && (
  <>
    <script src="/brain-analytics.js" is:inline></script>
    <script define:vars={{ brainUrl, brainKey, debug }} is:inline>
      if (typeof BrainAnalytics !== 'undefined') {
        BrainAnalytics.init({
          url: brainUrl,
          key: brainKey,
          debug: debug,
          trackScrollDepth: true,
          trackPerformance: true,
          trackClicks: true
        });
      }
    </script>
  </>
)}
